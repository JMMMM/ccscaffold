# SpecKit Agent 使用指南

## 简介

SpecKit Agent 是一个智能代理，专门用于引导用户通过 spec-kit 方法论完成系统化的功能开发。它能够自动执行一系列斜杠命令，确保开发过程的完整性和一致性。

## 工作原理

当用户调用 SpecKit Agent 时，它会：

1. **检查当前状态**: 检测用户已经完成了哪些步骤
2. **确定下一步**: 根据工作流顺序确定应该执行的下一个命令
3. **执行命令**: 自动调用相应的 `/speckit.*` 命令
4. **等待反馈**: 在需要用户输入时暂停
5. **继续工作流**: 收到用户反馈后继续执行下一步

## 完整工作流

```
开始
  │
  ▼
1. /speckit.constitution
  │  └─ 生成项目宪章
  ▼
2. /speckit.specify
  │  └─ 创建功能规格
  ▼
3. /speckit.clarify
  │  └─ 问答澄清需求
  ▼
4. /speckit.checklist
  │  └─ 创建检查清单
  ▼
5. /speckit.plan
  │  └─ 制定实施计划
  ▼
6. /speckit.tasks
  │  └─ 分解任务
  ▼
7. /speckit.analyze
  │  └─ 分析方法
  ▼
8. /speckit.checklist
  │  └─ 最终验证
  ▼
9. /speckit.implement
  │  └─ 执行实施
  ▼
完成
```

## 使用示例

### 示例 1: 完整工作流

```
user: 使用spec-kit创建一个博客系统功能
assistant: 我将使用spec-kit-feature-agent来为您的博客系统功能执行spec-kit工作流。

首先执行 /speckit.constitution 来生成项目宪章...

[执行命令并生成 constitution.md]

现在执行 /speckit.specify 来定义功能规格...

[执行命令并生成 spec.md]

接下来执行 /speckit.clarify 来澄清需求细节...

[执行命令，提出问题]
请回答以下问题以帮助我更好地理解需求：
1. 博客系统需要支持哪些用户角色？
2. 是否需要评论功能？
...

[等待用户回答后继续]
```

### 示例 2: 从中间继续

```
user: 我已经完成了spec和plan，现在需要继续
assistant: 我将使用spec-kit-feature-agent从您中断的地方继续spec-kit工作流。

检测到您已完成：
- /speckit.constitution
- /speckit.specify
- /speckit.plan

下一步将执行 /speckit.tasks 来分解任务...

[执行命令]
```

### 示例 3: 跳过特定步骤

```
user: 跳过clarify，直接到plan
assistant: 收到。我将跳过 /speckit.clarify 和 /speckit.checklist，直接执行 /speckit.plan。

[执行 /speckit.plan]
```

## 最佳实践

### 1. 准备阶段

在开始之前，确保：
- 已明确功能的基本需求
- 了解项目的背景和约束
- 准备好回答相关问题

### 2. 执行阶段

- **保持耐心**: 完整工作流可能需要多轮交互
- **详细回答**: 在 clarify 阶段尽可能详细地回答问题
- **保存进度**: 在关键步骤后保存工作
- **检查输出**: 每步完成后检查生成的文档

### 3. 实施阶段

- **遵循计划**: 按照 tasks.md 中的顺序实施
- **持续验证**: 使用 checklist.md 验证每个步骤
- **及时反馈**: 遇到问题时及时反馈

## 常见问题

### Q: 可以跳过某些步骤吗？

A: 技术上可以，但不建议。每个步骤都有其目的，跳过可能导致后续问题。

### Q: 如何修改已完成的内容？

A: 可以直接修改相应的文档文件（如 spec.md, plan.md），然后重新执行相关命令。

### Q: 工作流可以中途暂停吗？

A: 可以。Agent 会记住当前进度，下次可以从断点继续。

### Q: 需要多长时间完成？

A: 取决于功能的复杂度和团队响应速度。简单的功能可能几分钟，复杂的可能需要数天。

### Q: 支持多人协作吗？

A: 支持。生成的文档可以提交到版本控制系统，团队成员可以查看和编辑。

## 高级技巧

### 1. 自定义工作流

如果需要自定义工作流，可以修改 agent 配置文件中的工作流顺序。

### 2. 集成到 CI/CD

可以将 spec-kit 工作流集成到 CI/CD 流程中，实现自动化验证。

### 3. 模板复用

对于相似的功能，可以复用之前生成的模板，加快开发速度。

### 4. 版本控制

建议将所有生成的文档纳入版本控制，方便追溯和回滚。

## 故障排除

### 问题: Agent 无法识别已完成的步骤

**解决方案**: 确保相关文档文件存在且格式正确。

### 问题: 命令执行超时

**解决方案**: 检查网络连接，或尝试分步执行命令。

### 问题: 生成的内容不符合预期

**解决方案**:
1. 检查输入是否清晰明确
2. 尝试重新执行相关命令
3. 手动编辑生成的内容

## 相关资源

- [SpecKit 官方文档](https://github.com/anthropics/spec-kit)
- [项目 README](../README.md)
- [功能文档](../README.md)
